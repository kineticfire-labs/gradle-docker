/*
 * (c) Copyright 2023-2025 gradle-docker Contributors. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

pluginManagement {
    plugins {
        id 'com.kineticfire.gradle.docker' version "${providers.gradleProperty('plugin_version').get()}"
    }
    repositories {
        mavenLocal()  // Use local Maven repository for gradle-docker plugin
        gradlePluginPortal()
        mavenCentral()
    }
}

plugins {
    id 'org.gradle.toolchains.foojay-resolver-convention' version '1.0.0'
}

rootProject.name = 'plugin-integration-test'

// Include the app subproject (builds the Java application)
include 'app'

// Include Docker integration tests
include 'docker'
include 'docker:scenario-1'
include 'docker:scenario-2'
include 'docker:scenario-3'
include 'docker:scenario-4'
include 'docker:scenario-5'
include 'docker:scenario-6'
include 'docker:scenario-7'
include 'docker:scenario-8'
include 'docker:scenario-9'
include 'docker:scenario-10'
include 'docker:scenario-11'
include 'docker:scenario-12'
include 'docker:scenario-13'
include 'docker:scenario-99'

// Include DockerOrch integration tests
include 'dockerTest'

// Verification tests (plugin mechanics validation)
include 'dockerTest:verification:basic'
include 'dockerTest:verification:basic:app'
include 'dockerTest:verification:basic:app-image'

include 'dockerTest:verification:lifecycle-class'
include 'dockerTest:verification:lifecycle-class:app'
include 'dockerTest:verification:lifecycle-class:app-image'

include 'dockerTest:verification:lifecycle-method'
include 'dockerTest:verification:lifecycle-method:app'
include 'dockerTest:verification:lifecycle-method:app-image'

include 'dockerTest:verification:wait-healthy'
include 'dockerTest:verification:wait-healthy:app'
include 'dockerTest:verification:wait-healthy:app-image'

include 'dockerTest:verification:wait-running'
include 'dockerTest:verification:wait-running:app'
include 'dockerTest:verification:wait-running:app-image'

include 'dockerTest:verification:mixed-wait'
include 'dockerTest:verification:mixed-wait:app'
include 'dockerTest:verification:mixed-wait:app-image'

include 'dockerTest:verification:existing-images'
include 'dockerTest:verification:existing-images:app'
include 'dockerTest:verification:existing-images:app-image'

include 'dockerTest:verification:logs-capture'
include 'dockerTest:verification:logs-capture:app'
include 'dockerTest:verification:logs-capture:app-image'

include 'dockerTest:verification:multi-service'
include 'dockerTest:verification:multi-service:app'
include 'dockerTest:verification:multi-service:app-image'

// Example tests (user-facing demonstrations)
include 'dockerTest:examples:web-app'
include 'dockerTest:examples:web-app:app'
include 'dockerTest:examples:web-app:app-image'

include 'dockerTest:examples:web-app-junit'
include 'dockerTest:examples:web-app-junit:app'
include 'dockerTest:examples:web-app-junit:app-image'

include 'dockerTest:examples:stateful-web-app'
include 'dockerTest:examples:stateful-web-app:app'
include 'dockerTest:examples:stateful-web-app:app-image'

include 'dockerTest:examples:isolated-tests'
include 'dockerTest:examples:isolated-tests:app'
include 'dockerTest:examples:isolated-tests:app-image'

include 'dockerTest:examples:isolated-tests-junit'
include 'dockerTest:examples:isolated-tests-junit:app'
include 'dockerTest:examples:isolated-tests-junit:app-image'

include 'dockerTest:examples:database-app'
include 'dockerTest:examples:database-app:app'
include 'dockerTest:examples:database-app:app-image'

// Include dockerWorkflows integration tests
include 'dockerWorkflows'
include 'dockerWorkflows:scenario-1-basic'
include 'dockerWorkflows:scenario-1-basic:app-image'
include 'dockerWorkflows:scenario-2-delegated-lifecycle'
include 'dockerWorkflows:scenario-2-delegated-lifecycle:app-image'
include 'dockerWorkflows:scenario-3-failed-tests'
include 'dockerWorkflows:scenario-3-failed-tests:app-image'
include 'dockerWorkflows:scenario-4-multiple-pipelines'
include 'dockerWorkflows:scenario-4-multiple-pipelines:app-image'
include 'dockerWorkflows:scenario-5-complex-success'
include 'dockerWorkflows:scenario-5-complex-success:app-image'
include 'dockerWorkflows:scenario-6-hooks'
include 'dockerWorkflows:scenario-6-hooks:app-image'
include 'dockerWorkflows:scenario-7-save-publish'
include 'dockerWorkflows:scenario-7-save-publish:app-image'
include 'dockerWorkflows:scenario-8-method-lifecycle'
include 'dockerWorkflows:scenario-8-method-lifecycle:app-image'

// Include dockerProject integration tests
include 'dockerProject'
include 'dockerProject:scenario-1-build-mode'
include 'dockerProject:scenario-1-build-mode:app-image'
include 'dockerProject:scenario-2-sourceref-mode'
include 'dockerProject:scenario-2-sourceref-mode:app-image'
include 'dockerProject:scenario-3-save-publish'
include 'dockerProject:scenario-3-save-publish:app-image'
include 'dockerProject:scenario-4-method-lifecycle'
include 'dockerProject:scenario-4-method-lifecycle:app-image'
include 'dockerProject:scenario-5-contextdir-mode'
include 'dockerProject:scenario-5-contextdir-mode:app-image'
include 'dockerProject:scenario-6-repository-mode'
include 'dockerProject:scenario-6-repository-mode:app-image'
include 'dockerProject:scenario-7-repository-registry'
include 'dockerProject:scenario-7-repository-registry:app-image'
include 'dockerProject:scenario-8-imagename-full'
include 'dockerProject:scenario-8-imagename-full:app-image'
include 'dockerProject:scenario-9-config-cache'
include 'dockerProject:scenario-9-config-cache:app-image'
